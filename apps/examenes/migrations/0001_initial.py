# Generated by Django 5.2.7 on 2025-11-13 11:20

import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('pacientes', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ExamenPPD',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha_aplicacion', models.DateField(verbose_name='Fecha de Aplicación')),
                ('fecha_lectura', models.DateField(verbose_name='Fecha de Lectura')),
                ('milimetro_induration', models.PositiveIntegerField(help_text='Milímetros de induración medida', verbose_name='Milímetros de Induración')),
                ('resultado', models.CharField(choices=[('POSITIVO', 'Positivo'), ('NEGATIVO', 'Negativo'), ('INDETERMINADO', 'Indeterminado'), ('NO_LEIDO', 'No Leído')], max_length=50, verbose_name='Resultado')),
                ('lugar_aplicacion', models.CharField(choices=[('BRAZO_DERECHO', 'Brazo Derecho'), ('BRAZO_IZQUIERDO', 'Brazo Izquierdo')], default='BRAZO_DERECHO', max_length=100, verbose_name='Lugar de Aplicación')),
                ('observaciones', models.TextField(blank=True, null=True, verbose_name='Observaciones')),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('paciente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='examenes_ppd', to='pacientes.pacientespaciente')),
                ('usuario_aplicacion', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ppd_aplicados', to=settings.AUTH_USER_MODEL, verbose_name='Usuario que aplicó la prueba')),
                ('usuario_lectura', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ppd_leidos', to=settings.AUTH_USER_MODEL, verbose_name='Usuario que leyó la prueba')),
            ],
            options={
                'verbose_name': 'Prueba de Tuberculina (PPD)',
                'verbose_name_plural': 'Pruebas de Tuberculina (PPD)',
                'db_table': 'examenes_ppd',
                'ordering': ['-fecha_aplicacion'],
            },
        ),
        migrations.CreateModel(
            name='ExamenRadiologico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_radiografia', models.CharField(choices=[('TORAX_AP', 'Radiografía de Tórax AP'), ('TORAX_PA', 'Radiografía de Tórax PA'), ('TORAX_LATERAL', 'Radiografía de Tórax Lateral'), ('OTRA', 'Otra Radiografía')], max_length=50, verbose_name='Tipo de Radiografía')),
                ('fecha_examen', models.DateField(verbose_name='Fecha del Examen')),
                ('hallazgos', models.CharField(choices=[('NORMAL', 'Normal'), ('COMPATIBLE_TBC', 'Compatible con TBC'), ('SUGERENTE_TBC', 'Sugerente de TBC'), ('INESPECIFICO', 'Hallazgos Inespecíficos'), ('OTRO', 'Otros Hallazgos')], max_length=50, verbose_name='Hallazgos Principales')),
                ('descripcion_hallazgos', models.TextField(verbose_name='Descripción Detallada de Hallazgos')),
                ('localizacion_lesiones', models.CharField(blank=True, max_length=200, null=True, verbose_name='Localización de Lesiones')),
                ('establecimiento_realizacion', models.CharField(max_length=200, verbose_name='Establecimiento donde se realizó')),
                ('numero_informe', models.CharField(blank=True, max_length=100, null=True, verbose_name='Número de Informe')),
                ('observaciones', models.TextField(blank=True, null=True, verbose_name='Observaciones')),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('paciente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='examenes_radiologicos', to='pacientes.pacientespaciente')),
                ('usuario_registro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Examen Radiológico',
                'verbose_name_plural': 'Exámenes Radiológicos',
                'db_table': 'examenes_radiologicos',
                'ordering': ['-fecha_examen'],
            },
        ),
        migrations.CreateModel(
            name='ExamenesExamenbacteriologico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_examen', models.CharField(choices=[('BACILOSCOPIA', 'Baciloscopia'), ('CULTIVO', 'Cultivo'), ('GENEXPERT', 'GeneXpert'), ('XPERTO', 'Xpert MTB/RIF'), ('LAM', 'LAM (Urinario)'), ('PPD', 'PPD (Tuberculina)'), ('RADIOGRAFIA', 'Radiografía de Tórax'), ('TAMIZAJE', 'Tamizaje Molecular')], max_length=100, verbose_name='Tipo de Examen')),
                ('tipo_muestra', models.CharField(choices=[('ESPUTO', 'Esputo'), ('ESPUTO_INDUCIDO', 'Esputo Inducido'), ('LAVADO_GASTRICO', 'Lavado Gástrico'), ('ASPIRADO', 'Aspirado Bronquial'), ('BIOPSIA', 'Biopsia'), ('SANGRE', 'Sangre'), ('ORINA', 'Orina'), ('LIQUIDO_CEFALORRAQUIDEO', 'Líquido Cefalorraquídeo'), ('LIQUIDO_PLEURAL', 'Líquido Pleural'), ('OTRO', 'Otro')], max_length=100, verbose_name='Tipo de Muestra')),
                ('otro_tipo_muestra', models.CharField(blank=True, max_length=100, null=True, verbose_name='Especificar otro tipo de muestra')),
                ('fecha_solicitud', models.DateField(default=django.utils.timezone.now, verbose_name='Fecha de Solicitud')),
                ('fecha_toma_muestra', models.DateField(verbose_name='Fecha de Toma de Muestra')),
                ('fecha_ingreso_laboratorio', models.DateField(blank=True, null=True, verbose_name='Fecha Ingreso Laboratorio')),
                ('fecha_resultado', models.DateField(blank=True, null=True, verbose_name='Fecha de Resultado')),
                ('resultado', models.CharField(choices=[('POSITIVO', 'Positivo'), ('NEGATIVO', 'Negativo'), ('INDETERMINADO', 'Indeterminado'), ('CONTAMINADO', 'Contaminado'), ('PENDIENTE', 'Pendiente'), ('NO_APLICA', 'No Aplica')], default='PENDIENTE', max_length=100, verbose_name='Resultado')),
                ('resultado_cuantitativo', models.CharField(blank=True, max_length=50, null=True, verbose_name='Resultado Cuantitativo')),
                ('resultado_cualitativo', models.TextField(blank=True, null=True, verbose_name='Resultado Cualitativo')),
                ('sensibilidad', models.CharField(blank=True, choices=[('SENSIBLE', 'Sensible'), ('RESISTENTE', 'Resistente'), ('MONO_RESISTENTE', 'Mono-Resistente'), ('POLI_RESISTENTE', 'Poli-Resistente'), ('ULTRA_RESISTENTE', 'Ultra-Resistente'), ('MDR', 'MDR (Multidrogorresistente)'), ('XDR', 'XDR (Extensamente resistente)'), ('PENDIENTE', 'Pendiente'), ('NO_APLICA', 'No Aplica')], max_length=100, null=True, verbose_name='Sensibilidad')),
                ('resistencia_isoniazida', models.BooleanField(default=False, verbose_name='Resistente a Isoniazida')),
                ('resistencia_rifampicina', models.BooleanField(default=False, verbose_name='Resistente a Rifampicina')),
                ('resistencia_pirazinamida', models.BooleanField(default=False, verbose_name='Resistente a Pirazinamida')),
                ('resistencia_etambutol', models.BooleanField(default=False, verbose_name='Resistente a Etambutol')),
                ('resistencia_estreptomicina', models.BooleanField(default=False, verbose_name='Resistente a Estreptomicina')),
                ('resistencia_fluoroquinolonas', models.BooleanField(default=False, verbose_name='Resistente a Fluoroquinolonas')),
                ('observaciones_muestra', models.TextField(blank=True, null=True, verbose_name='Observaciones de la Muestra')),
                ('observaciones_resultado', models.TextField(blank=True, null=True, verbose_name='Observaciones del Resultado')),
                ('estado_examen', models.CharField(choices=[('SOLICITADO', 'Solicitado'), ('MUESTRA_TOMADA', 'Muestra Tomada'), ('ENVIADO_LABORATORIO', 'Enviado a Laboratorio'), ('EN_PROCESO', 'En Proceso'), ('COMPLETADO', 'Completado'), ('CANCELADO', 'Cancelado')], default='SOLICITADO', max_length=50, verbose_name='Estado del Examen')),
                ('prioridad', models.CharField(choices=[('NORMAL', 'Normal'), ('URGENTE', 'Urgente'), ('EMERGENCIA', 'Emergencia')], default='NORMAL', max_length=20, verbose_name='Prioridad')),
                ('laboratorio', models.CharField(blank=True, max_length=200, null=True, verbose_name='Laboratorio de Referencia')),
                ('numero_muestra_lab', models.CharField(blank=True, max_length=100, null=True, verbose_name='Número de Muestra Laboratorio')),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('paciente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='examenes_bacteriologicos', to='pacientes.pacientespaciente')),
                ('usuario_registro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='examenes_registrados', to=settings.AUTH_USER_MODEL)),
                ('usuario_toma_muestra', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='examenes_toma_muestra', to=settings.AUTH_USER_MODEL, verbose_name='Usuario que tomó la muestra')),
            ],
            options={
                'verbose_name': 'Examen Bacteriológico',
                'verbose_name_plural': 'Exámenes Bacteriológicos',
                'db_table': 'examenes_examenbacteriologico',
                'ordering': ['-fecha_toma_muestra', '-fecha_registro'],
                'indexes': [models.Index(fields=['paciente', 'fecha_toma_muestra'], name='examenes_ex_pacient_b5185f_idx'), models.Index(fields=['tipo_examen', 'resultado'], name='examenes_ex_tipo_ex_7f0aa1_idx'), models.Index(fields=['estado_examen'], name='examenes_ex_estado__e5b159_idx')],
            },
        ),
    ]
