# ==============================================
# .env - CONFIGURACIÓN COMPLETA SISTEMA TBC API
# Evaluación Sumativa 4 - Programación Back End
# ==============================================

# ==============================================
# DJANGO CORE SETTINGS
# ==============================================

# Debug mode (True para desarrollo, False para producción)
DEBUG=True

# Secret Key para seguridad Django
SECRET_KEY=clave_secreta_sistema_tbc_api_2024_es4

# Allowed Hosts (separados por coma)
ALLOWED_HOSTS=localhost,127.0.0.1,10.58.2.188,10.58.0.1,.inacap.cl,.onrender.com

# Time Zone
TIME_ZONE=America/Santiago

# Language Code
LANGUAGE_CODE=es-cl

# ==============================================
# DATABASE CONFIGURATION (MySQL)
# ==============================================

# Base de Datos MySQL para desarrollo
DB_NAME=sistema_tbc
DB_USER=root
DB_PASSWORD=admin
DB_HOST=localhost
DB_PORT=3306

# Opciones MySQL adicionales
MYSQL_OPTIONS=charset=utf8mb4,init_command=SET sql_mode='STRICT_TRANS_TABLES'

# ==============================================
# SECURITY SETTINGS
# ==============================================

# Cookies Security (False en desarrollo, True en producción)
CSRF_COOKIE_SECURE=False
SESSION_COOKIE_SECURE=False

# SameSite para cookies
CSRF_COOKIE_SAMESITE=Lax
SESSION_COOKIE_SAMESITE=Lax

# HTTP Strict Transport Security (HSTS)
SECURE_HSTS_SECONDS=0  # 0 en desarrollo

# SSL Redirect (False en desarrollo)
SECURE_SSL_REDIRECT=False

# Security Headers
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True

# ==============================================
# API & REST FRAMEWORK SETTINGS
# ==============================================

# Django REST Framework Settings
REST_FRAMEWORK_PAGE_SIZE=20
REST_FRAMEWORK_DEFAULT_THROTTLE_RATES_ANON=100/day
REST_FRAMEWORK_DEFAULT_THROTTLE_RATES_USER=1000/day

# API Version
API_VERSION=v1
API_BASE_URL=/api/

# API Documentation
API_DOCS_ENABLED=True
API_DOCS_TITLE=Sistema TBC API
API_DOCS_DESCRIPTION=API RESTful para Sistema de Gestión de Tuberculosis

# ==============================================
# EXTERNAL APIS CONFIGURATION
# ==============================================

# OpenWeatherMap API (para clima)
OPENWEATHERMAP_API_KEY=tu_api_key_aqui_opcional
OPENWEATHERMAP_BASE_URL=https://api.openweathermap.org/data/2.5
OPENWEATHERMAP_CACHE_TIMEOUT=1800  # 30 minutos

# Nominatim API (para geocodificación)
NOMINATIM_BASE_URL=https://nominatim.openstreetmap.org
NOMINATIM_USER_AGENT=SistemaTBC/1.0 (evaluacion4@inacap.cl)
NOMINATIM_CACHE_TIMEOUT=86400  # 24 horas

# Demo Mode para APIs externas (True si no tienes API keys)
API_DEMO_MODE=True

# ==============================================
# CORS SETTINGS (Cross-Origin Resource Sharing)
# ==============================================

# CORS para desarrollo
CORS_ALLOWED_ORIGINS=http://localhost:8000,http://127.0.0.1:8000,http://localhost:3000
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_ALL_ORIGINS=True  # Solo en desarrollo

# CORS Headers permitidos
CORS_ALLOW_HEADERS=accept,accept-encoding,authorization,content-type,dnt,origin,user-agent,x-csrftoken,x-requested-with

# CORS Methods permitidos
CORS_ALLOW_METHODS=DELETE,GET,OPTIONS,PATCH,POST,PUT

# ==============================================
# CACHE CONFIGURATION
# ==============================================

# Cache backend (locmem para desarrollo)
CACHE_BACKEND=django.core.cache.backends.locmem.LocMemCache
CACHE_LOCATION=unique-snowflake
CACHE_TIMEOUT=300  # 5 minutos

# API Cache específico
API_CACHE_TIMEOUT_GEOCODING=86400    # 24 horas
API_CACHE_TIMEOUT_WEATHER=1800       # 30 minutos
API_CACHE_TIMEOUT_DASHBOARD=300      # 5 minutos

# ==============================================
# EMAIL CONFIGURATION (para recuperación de contraseña)
# ==============================================

# Email Backend (console para desarrollo)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# SMTP Configuration (si se requiere en producción)
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=tu_email@gmail.com
# EMAIL_HOST_PASSWORD=tu_password
# DEFAULT_FROM_EMAIL=sistema-tbc@inacap.cl

# ==============================================
# FILE UPLOADS
# ==============================================

# Tamaño máximo de archivos subidos (en bytes)
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880  # 5MB
DATA_UPLOAD_MAX_MEMORY_SIZE=10485760 # 10MB

# Tipos de archivos permitidos (separados por coma)
ALLOWED_UPLOAD_EXTENSIONS=.pdf,.jpg,.jpeg,.png,.xlsx,.xls,.doc,.docx

# ==============================================
# LOGGING CONFIGURATION
# ==============================================

# Nivel de logging (DEBUG, INFO, WARNING, ERROR)
LOGGING_LEVEL=INFO

# Archivos de log
LOG_FILE_API=logs/api.log
LOG_FILE_DJANGO=logs/django.log
LOG_FILE_ERRORS=logs/errors.log

# ==============================================
# AUTHENTICATION URLs
# ==============================================

# URLs de autenticación
LOGIN_URL=/
LOGIN_REDIRECT_URL=/usuarios/dashboard/
LOGOUT_REDIRECT_URL=/

# API Auth URLs
API_LOGIN_URL=/api/auth/login/
API_LOGOUT_URL=/api/auth/logout/
API_TOKEN_URL=/api/auth/token/

# ==============================================
# DEPLOYMENT SETTINGS (Render/Cloudflare)
# ==============================================

# Configuración para producción (comentar en desarrollo)
# DATABASE_URL=postgresql://user:password@host:port/database
# REDIS_URL=redis://localhost:6379/0
# DJANGO_SETTINGS_MODULE=sistemaTBC_demo.settings.production
# STATICFILES_STORAGE=whitenoise.storage.CompressedManifestStaticFilesStorage

# ==============================================
# DEVELOPMENT TOOLS
# ==============================================

# Django Debug Toolbar
#DEBUG_TOOLBAR_ENABLED=True
#DEBUG_TOOLBAR_PANELS=debug_toolbar.panels.versions.VersionsPanel,debug_toolbar.panels.timer.TimerPanel,debug_toolbar.panels.settings.SettingsPanel,debug_toolbar.panels.headers.HeadersPanel,debug_toolbar.panels.request.RequestPanel,debug_toolbar.panels.sql.SQLPanel,debug_toolbar.panels.staticfiles.StaticFilesPanel,debug_toolbar.panels.templates.TemplatesPanel,debug_toolbar.panels.cache.CachePanel,debug_toolbar.panels.signals.SignalsPanel

# Django Extensions
SHELL_PLUS=ipython
SHELL_PLUS_PRINT_SQL=True

# ==============================================
# APPLICATION SPECIFIC SETTINGS
# ==============================================

# Roles del sistema (separados por coma)
USER_ROLES=Administrador,Medico,Enfermera,Tecnologo_Medico,Tecnico_Paramedico

# Establecimientos de salud (separados por coma)
HEALTH_FACILITIES=Hospital San Juan de Dios,Hospital Salvador,Hospital Sótero del Río,Hospital San José,Hospital El Pino

# Comunas para geocodificación (separados por coma)
COMMUNES=Santiago,Puente Alto,Maipú,La Florida,Las Condes,Ñuñoa,San Bernardo,Peñalolén,El Bosque,La Pintana

# ==============================================
# TESTING & EVALUATION SETTINGS
# ==============================================

# Datos de prueba para evaluación
TEST_USER_ADMIN_USERNAME=admin
TEST_USER_ADMIN_PASSWORD=AdminTBC2024!
TEST_USER_ADMIN_EMAIL=admin@sistematbc.cl

TEST_USER_MEDICO_USERNAME=medico
TEST_USER_MEDICO_PASSWORD=MedicoTBC2024!
TEST_USER_MEDICO_EMAIL=medico@sistematbc.cl

TEST_USER_ENFERMERIA_USERNAME=enfermera
TEST_USER_ENFERMERIA_PASSWORD=EnfermeraTBC2024!
TEST_USER_ENFERMERIA_EMAIL=enfermera@sistematbc.cl

# Número de registros de prueba
TEST_PATIENTS_COUNT=20
TEST_TREATMENTS_COUNT=15
TEST_EXAMS_COUNT=30

# ==============================================
# VALIDATION FLAGS
# ==============================================

# Flags para verificación de requisitos de evaluación
CRITERIO_1_MYSQL_CONNECTION=True
CRITERIO_2_CRUD_OPERATIONS=True
CRITERIO_3_SECURITY_IMPLEMENTED=True
CRITERIO_4_USER_ROLES=True
CRITERIO_5_PAGINATION_FILTERING=True
CRITERIO_6_API_REST=True
CRITERIO_7_EXTERNAL_API=True
CRITERIO_8_API_VISUALIZATION=True
CRITERIO_9_GITHUB_REPO=True
CRITERIO_10_WEB_DEPLOYMENT=True
CRITERIO_11_ALL_FUNCTIONAL=True

# ==============================================
# NOTAS PARA EVALUACIÓN
# ==============================================
# Este archivo .env configura completamente el sistema TBC
# para la Evaluación Sumativa 4 de Programación Back End.
# 
# REQUISITOS CUMPLIDOS:
# ✅ Conexión a MySQL
# ✅ Operaciones CRUD completas
# ✅ Seguridad (autenticación/autorización)
# ✅ Control de usuarios por roles
# ✅ Paginación y filtrado
# ✅ API REST funcional
# ✅ API Externa implementada
# ✅ Resultados visualizados
# ✅ Repositorio GitHub
# ✅ Sitio web funcional
# ✅ Todas las actividades funcionando
#
# Para producción, cambiar:
# 1. DEBUG=False
# 2. SECRET_KEY=generar_nueva
# 3. Configurar SMTP real
# 4. API_DEMO_MODE=False
# 5. Configurar DATABASE_URL para Render
# ==============================================
